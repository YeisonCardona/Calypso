import{a as C}from"./chunk-3LS5QHCI.js";import{a as S,b as f}from"./chunk-7EJTMAGX.js";import"./chunk-LWX6SOT5.js";import{a as h}from"./chunk-DFR7CWBM.js";import"./chunk-MKW25HH4.js";import"./chunk-NUASUJJ4.js";import"./chunk-DVZW354J.js";import"./chunk-DBVVSDMZ.js";import{Da as n,Qb as d,Rb as g,Sb as c,ob as s,ub as p,vc as u,wc as r,xc as m}from"./chunk-U5ZW5HK4.js";var v=class a{constructor(e,o){this.sidenavService=e;this.toolbarService=o;this.sidenavService.setMainAction({label:"New Project",icon:"add",action:()=>{console.log("New Pipeline")}}),this.loadFromLocalStorage(this.currentFile())}nodes=[];edges=[];edgesArgs=[];reload=n("");currentFile=n("default");ngAfterViewInit(){setTimeout(()=>{this.toolbarService.insert("START_SLOT",S,{inputs:{label:"Project:",appearance:"outline",value:this.currentFile(),options:[{label:"Default EEG preprocessing",value:"default"},{label:"Sandbox",value:"sandbox"},{label:"Pipeline",value:"pipeline"}],classes:"no-margin-bottom width-300px hide-subscript-wrapper"},outputs:{valueChange:e=>this.loadFromLocalStorage(e)}})},100),setInterval(()=>{this.saveToLocalStorage()},1e3)}getCurrentFile(){return{nodes:structuredClone(this.nodes),edges:structuredClone(this.edges),edgesArgs:structuredClone(this.edgesArgs)}}setCurrentFile(e){this.nodes=structuredClone(e.nodes),this.edges=structuredClone(e.edges),this.edgesArgs=structuredClone(e.edgesArgs)}saveToLocalStorage(){localStorage.setItem(this.currentFile(),JSON.stringify(this.getCurrentFile()))}loadFromLocalStorage(e){let o=localStorage.getItem(e);this.currentFile.set(e),o&&(this.setCurrentFile(JSON.parse(o)),this.reload.set(e))}static \u0275fac=function(o){return new(o||a)(s(C),s(h))};static \u0275cmp=p({type:a,selectors:[["app-pipelines"]],decls:1,vars:4,consts:[["width","5000px","height","calc(60vh - var(--toolbar-height) - 0.75rem)",3,"nodesChange","edgesChange","edgesArgsChange","nodes","edges","edgesArgs","reload"]],template:function(o,i){o&1&&(g(0,"app-pipeline-controller",0),m("nodesChange",function(t){return r(i.nodes,t)||(i.nodes=t),t})("edgesChange",function(t){return r(i.edges,t)||(i.edges=t),t})("edgesArgsChange",function(t){return r(i.edgesArgs,t)||(i.edgesArgs=t),t}),c()),o&2&&(u("nodes",i.nodes)("edges",i.edges)("edgesArgs",i.edgesArgs),d("reload",i.reload))},dependencies:[f],encapsulation:2})};export{v as PipelinesComponent};
